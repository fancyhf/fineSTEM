# 文档目标

* 为 fineSTEM 项目建立统一、可执行、可审计的管理规范文档，覆盖技术开发、媒体创作、项目结构、跨职能协作与质量管控。

* 文档采用 Markdown，包含清晰层级结构、模板示例与检查清单；文档头部包含版本与 MCP 时间戳。

# 将修改/创建的文件

* `.trae/rules/project_rules.md`（新增完整内容）

* （后续迭代建议，不在本次实现内）模板目录：`.trae/templates/`（创意简报、分镜脚本、拍摄清单、AI 提示词、Git 提交模板、PR 模板、QA 检查清单）

# 文档结构（目录与章节）

1. 技术开发规范

   * 代码编写标准：命名（API/JSON camelCase、DB snake\_case、常量 UPPER\_SNAKE\_CASE）、注释（JSDoc/TypeDoc/JavaDoc/PyDoc）、结构（前后端分层、单一职责 ≤30 行、TS 严格模式）。

   * 版本控制流程：分支模型（main/develop/feature/hotfix/release）、Conventional Commits、PR 门禁与合并策略（squash、禁止直接 push main）、变更审计（背景/影响/兼容/测试与文档）。

   * 测试规范：UT/IT/E2E 分层与覆盖率门槛（业务≥80%、关键路径与 API 100%）；契约测试对齐 OpenAPI；独立测试数据库与数据清理；报告归档。

   * 部署与运维标准：CI/CD 阶段（lint/typecheck/tests/coverage/security/openapi/build/package/deploy/smoke/notify）、多环境发布（dev→staging→canary→prod）、蓝绿与金丝雀策略、监控与告警、自动回滚。

   * 环境合规：第三方工具与依赖安装路径使用 `D:`/`H:`，工作区 PATH 禁止新增第三方 `C:\`（系统白名单除外），数据库数据/缓存/日志标准路径与审计记录。

2. 媒体创作规范

   * 创意开发流程：研究与洞察→选题策略→概念与脚本（3–5 秒钩子）→预演与评审→制作与发布→数据复盘与迭代。

   * 视觉设计标准：色彩系统（主/辅/警示、WCAG 2.1 AA）、字体层级与安全区、缩略图与封面准则、资产与图标一致性、A11y 基线（字幕与 alt 文本、色盲包容）。

   * 视频制作流程：分镜脚本→拍摄规范（光线/声音/稳定）→后期（节奏剪辑/混音/调色）→技术规格（分辨率/帧率/色彩/音频 LUFS/码率）→多端裁切与质检。

   * AI 内容生成标准：提示词结构（背景/受众→目标与约束→风格参考→结构与镜头→输出规格→审核披露）、版权与来源、质量/事实核验、可追溯记录（提示词/版本/模型参数）。

   * 合规与版权：肖像权/音乐授权/商标使用、平台政策与敏感内容分级、隐私与数据脱敏、赞助/AI 辅助披露与水印。

3. 项目结构管理

   * 目录架构设计（示例）：

```
G:\mediaProjects\fineSTEM
├─ src/                      # 源代码（后端/前端分层）
├─ prototype/                # 原型与实验（限定范围）
│  ├─ ui/                    # UI 原型
│  └─ dbdesign/              # 数据设计原型
├─ media/                    # 媒体资源与工程
│  ├─ assets/                # 原始素材（图片/音视频）
│  ├─ projects/              # 母版工程（版本化）
│  └─ exports/               # 导出成品（多端规格）
├─ docs/                     # 项目与技术/创意文档
├─ config/                   # 环境与工具配置（.env.example 等）
├─ scripts/                  # 运维与工具脚本（ops/ci）
├─ tests/                    # 集成与端到端测试
├─ logs/                     # 项目级日志与审计
└─ .trae/                    # 规则、模板、验证与审计
```

* 环境配置标准：多环境 `dev/test/staging/prod` 配置分离；密钥使用安全注入，不入库；变量示例（`NVM_HOME/PYENV/JAVA_HOME/PGDATA/CACHE_DIR`）。

* 文档体系规范：技术文档（API/OpenAPI、架构、数据字典、Release Notes）、创意文档（Brief、Treatment、Storyboard、拍摄计划、Vendor SLAs）、统一模板与版本化。

1. 跨职能协作流程

   * 媒体与技术对接机制：单一事实来源（Brief/Concept Pack/Solution Design/WBS+Budget/QA Report）、接口标准（媒体资产命名与版本、数据字典↔API 定义一致）。

   * 创意评审与技术可行性评估：Gate-0→Gate-7 门控（Intake/Feasibility/Concept\&Solution/Preprod\&Vendor/Build\&Shoot/Integration\&QA/Sign-off\&Launch/Retro\&KM），评分与红线、`Go/Conditional/De-scope/No-Go` 决议。

   * 多角色协作工作流：RACI 映射到 ${媒体工程管家} / ${媒体产品管家} / ${技术顾问} / ${环境配置专家} / ${项目规范管家} / ${架构设计专家}；列出关键交付物与通过准则。

2. 质量管控体系

   * 媒体内容审核标准：版权与授权、技术规格、标题/封面与文案一致性、A11y 检查、平台政策合规；发布前审核清单与放行记录。

   * 技术代码审查流程：评审清单（命名/结构/职责/错误处理/性能/安全/测试）、PR 门禁（lint/typecheck/tests/coverage/security/openapi）、拒绝不达标 PR。

   * 项目里程碑验收标准：交付物完整性与一致性、质量门槛达标（严重缺陷为零）、合规与风险可控、运营与 ROI 就绪；签署与授权、回滚与灰度准备。

# 模板与示例（文档内提供可复制样例）

* Git 提交模板（Conventional Commits）：`type(scope): subject` + body + breaking changes + footer。

* PR 模板：背景/变更与影响/兼容策略/测试与文档/里程碑与回滚方案。

* 短视频脚本模板：钩子→痛点→步骤→证据→CTA→结尾。

* 拍摄清单模板：场景/设备参数/人员与许可/风险备用/道具/合规。

* 视觉规范卡模板：色彩/字体/Logo 安全区/构图/封面/A11y。

* AI 提示词模板：背景→风格→结构→约束→规格→审核与披露。

* 发布审核清单：版权与授权/技术规格/文案与标签/多端版本/质检与放行。

* CI/CD 阶段清单：构建、验证与发布门禁；蓝绿/金丝雀操作要点。

# 实施关键步骤

1. 在 `.trae/rules/project_rules.md` 填充上述结构的完整 Markdown 内容（含示例与清单）。
2. 在文档头部增加元信息（`version`、`created_at` MCP 时间、`maintainer`、`change_log`）。
3. 引用环境合规策略：路径、变量、数据/缓存/日志位置与审计写入要求；在文档中显式强调“不得将新工具安装到 C 盘”。
4. 内嵌与链接 OpenAPI、A11y、CI 门禁与合规扫描的执行要求；约束测试覆盖率与失败阻断合并。
5. 提供 RACI 与 Gate 表格（简版）以支持跨职能决策与放行；固化关键交付物与验收标准。

# 边缘情况与风险

* 合规红线：安装路径与 PATH 禁止第三方 `C:\`；文档中给出拦截与迁移流程。

* 版权与隐私：素材来源与授权记录、未成年人保护、敏感主题分级；在发布审核清单中强制检查。

* 破坏性变更：API 使用版本化与双轨灰度，提供迁移与回滚方案；文档中明确流程。

* 文档演进：版本与变更记录维护，避免规范与实现脱节；每季度评审与更新。

# 验证标准（交付即验收）

* 文档结构完整且层级清晰；模板与示例可复制可用。

* 技术与媒体规范均覆盖，并与环境合规与 CI/CD 门禁一致。

* RACI 与 Gate 流程明确，质量管控与验收标准可执行。

* 文档格式与术语一致，时间戳与版本信息齐备。

# 下一步

* 确认本计划后，我将一次性在 `.trae/rules/project_rules.md` 写入完整规范文档，并回传内容供审阅；如需同时创建模板目录与文件，请告知是否纳入本次实现。

